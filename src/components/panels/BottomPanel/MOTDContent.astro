---
import Thumbnail from './Thumbnail.astro';
---

<template
    x-data="motdContent()"
    x-init="$store.tracks.loadMotd()"
    x-for="(p, i) in motdTracks"
    :key="p.trackId"
>
    <Thumbnail
        item="p"
        index="i"
        getImage="getImage"
        getLabel="getLabel"
        onClick="onClick"
    />
</template>

<script is:inline>
function motdContent() {
    return {
        get motdTracks() {
            return this.$store.tracks.motdTracks ?? []
        },

        getImage(p) {
            return this.$store.tracks.thumbnailUrl(p.trackId)
        },

        getLabel(p) {
            return p.title
        },

        onClick(p) {
            this.$store.tracks.openTrack(p.trackId)
        }
    }
}
</script>
